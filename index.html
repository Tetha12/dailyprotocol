<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FRIDAY OS v24.0</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%236366f1'/><stop offset='100%25' stop-color='%23818cf8'/></linearGradient></defs><rect width='32' height='32' rx='8' fill='url(%23g)'/><text x='16' y='23' font-family='Arial Black,sans-serif' font-size='20' font-weight='900' text-anchor='middle' fill='white'>D</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    window.firebaseModules = { initializeApp, getFirestore, doc, getDoc, setDoc, onSnapshot };
    window.dispatchEvent(new Event('firebaseReady'));
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Space Grotesk',sans-serif;background:#030712;color:#e2e8f0;overflow:hidden;font-size:18px;}
    h1,h2,h3,h4{font-family:'Outfit',sans-serif;}
    .mono{font-family:'JetBrains Mono',monospace;}
    ::-webkit-scrollbar{width:6px;}::-webkit-scrollbar-track{background:transparent;}::-webkit-scrollbar-thumb{background:rgba(99,102,241,.3);border-radius:10px;}
    .grid-bg{position:fixed;inset:0;z-index:0;pointer-events:none;background-image:linear-gradient(rgba(99,102,241,.025)1px,transparent 1px),linear-gradient(90deg,rgba(99,102,241,.025)1px,transparent 1px);background-size:48px 48px;}
    .glass{background:rgba(15,23,42,.7);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.07);border-radius:22px;}
    .glass-btn{transition:all .25s;cursor:pointer;}
    .glass-btn:hover{border-color:rgba(99,102,241,.4);background:rgba(15,23,42,.92);transform:translateY(-2px);box-shadow:0 20px 40px rgba(0,0,0,.4);}
    .glow{position:fixed;border-radius:50%;pointer-events:none;z-index:0;filter:blur(80px);}
    .btn{background:linear-gradient(135deg,#6366f1,#818cf8);color:#fff;font-weight:700;border-radius:16px;padding:18px 34px;border:none;cursor:pointer;box-shadow:0 8px 24px rgba(99,102,241,.3);font-family:'Outfit',sans-serif;font-size:17px;letter-spacing:.05em;text-transform:uppercase;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .2s;width:100%;}
    .btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 12px 32px rgba(99,102,241,.4);}
    .btn:disabled{opacity:.5;cursor:not-allowed;}
    .prog{height:10px;background:rgba(255,255,255,.08);border-radius:99px;overflow:hidden;}
    .prog-fill{height:100%;border-radius:99px;transition:width 1.2s cubic-bezier(.34,1.56,.64,1);}
    .tab{display:flex;align-items:center;gap:14px;padding:15px 22px;border-radius:15px;font-weight:600;font-size:17px;transition:all .2s;cursor:pointer;border:1px solid transparent;color:#64748b;background:transparent;width:100%;text-align:left;font-family:'Space Grotesk',sans-serif;}
    .tab:hover{color:#fff;background:rgba(255,255,255,.04);}
    .tab.on{color:#fff;background:rgba(99,102,241,.12);border-color:rgba(99,102,241,.25);}
    .ex-card{background:rgba(15,23,42,.5);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:22px 28px;display:flex;align-items:center;gap:18px;cursor:pointer;transition:all .2s;}
    .ex-card:hover{border-color:rgba(99,102,241,.25);}
    .ex-card.done{border-color:rgba(16,185,129,.25);background:rgba(16,185,129,.04);}
    .overlay{position:fixed;inset:0;z-index:100;background:rgba(0,0,0,.8);backdrop-filter:blur(16px);display:flex;align-items:center;justify-content:center;padding:16px;}
    .modal{background:#0a0f1e;border:1px solid rgba(255,255,255,.09);border-radius:26px;width:100%;max-width:860px;max-height:88vh;display:flex;flex-direction:column;box-shadow:0 40px 80px rgba(0,0,0,.7);}
    @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
    .anim{animation:fadeUp .3s ease forwards;}
    @keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
    .blink{animation:blink 1s step-end infinite;}
    @keyframes scan{0%{top:0;opacity:1}100%{top:100%;opacity:0}}
    .scanwrap{position:relative;overflow:hidden;}
    .scanwrap::after{content:'';position:absolute;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(99,102,241,.7),transparent);animation:scan 2.5s linear infinite;}
    @keyframes pulseRing{0%{transform:scale(.95);opacity:.8}70%{transform:scale(1.15);opacity:0}100%{transform:scale(1.15);opacity:0}}
    .pring{position:relative;}
    .pring::after{content:'';position:absolute;inset:-6px;border-radius:22px;border:2px solid rgba(99,102,241,.5);animation:pulseRing 2s ease-out infinite;}
    @keyframes spin{to{transform:rotate(360deg)}}
    .spin{animation:spin 1s linear infinite;display:inline-flex;}
    @keyframes syncPulse{0%,100%{opacity:.3}50%{opacity:1}}
    .sync{animation:syncPulse 2s ease-in-out infinite;}
    input.inp{width:100%;background:rgba(3,7,18,.9);border:1px solid rgba(255,255,255,.09);border-radius:14px;padding:19px 24px;color:#fff;font-size:18px;outline:none;transition:all .2s;font-family:'Space Grotesk',sans-serif;}
    input.inp:focus{border-color:rgba(99,102,241,.5);box-shadow:0 0 0 3px rgba(99,102,241,.08);}
    input.inp::placeholder{color:rgba(255,255,255,.18);}
    .sidebar{height:100vh;background:rgba(5,8,20,.95);border-right:1px solid rgba(255,255,255,.05);backdrop-filter:blur(24px);display:flex;flex-direction:column;transition:width .35s cubic-bezier(.4,0,.2,1);overflow:hidden;position:relative;z-index:40;flex-shrink:0;}
    .pcard{background:rgba(15,23,42,.5);border:1px solid rgba(255,255,255,.06);border-radius:20px;padding:32px;cursor:pointer;transition:all .25s;}
    .pcard:hover{border-color:rgba(99,102,241,.3);background:rgba(15,23,42,.9);transform:translateY(-2px);box-shadow:0 16px 40px rgba(0,0,0,.4);}
    .mobnav{position:fixed;bottom:0;left:0;right:0;background:rgba(5,8,20,.97);backdrop-filter:blur(20px);border-top:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-around;align-items:center;padding:10px 4px 22px;z-index:50;}
    .mobbtn{display:flex;flex-direction:column;align-items:center;gap:4px;padding:9px 11px;border-radius:12px;font-size:12px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;cursor:pointer;border:none;background:transparent;color:#334155;transition:all .2s;font-family:'Space Grotesk',sans-serif;}
    .mobbtn.on{color:#818cf8;}
    .vcard{background:rgba(15,23,42,.5);border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px 16px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:all .2s;}
    .vcard:hover{border-color:rgba(99,102,241,.3);background:rgba(15,23,42,.9);}
    .vcard.done{border-color:rgba(16,185,129,.25);background:rgba(16,185,129,.04);}
    .tag{display:inline-flex;padding:4px 11px;border-radius:7px;font-size:13px;font-weight:700;letter-spacing:.05em;text-transform:uppercase;}
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useMemo, useRef, useCallback } = React;

const FB = {
  apiKey:"AIzaSyCTQX07mRXuA73tvSpc_Rf3HNh5MpguENE",
  authDomain:"databasedailycheck.firebaseapp.com",
  projectId:"databasedailycheck",
  storageBucket:"databasedailycheck.firebasestorage.app",
  messagingSenderId:"1014838261484",
  appId:"1:1014838261484:web:afbfd9cfafe498f68757c9"
};
let _db=null;
const getDB=()=>{if(_db)return _db;const{initializeApp,getFirestore}=window.firebaseModules;_db=getFirestore(initializeApp(FB));return _db;};

// ─── ICON ───
const Icon=({name,size=20,className=''})=>{
  const ref=useRef(null);
  useEffect(()=>{if(!window.lucide||!ref.current)return;while(ref.current.firstChild)ref.current.removeChild(ref.current.firstChild);const el=document.createElement('i');el.setAttribute('data-lucide',name);ref.current.appendChild(el);window.lucide.createIcons({root:ref.current,nameAttr:'data-lucide',attrs:{width:size,height:size,class:className}});},[name,size,className]);
  return <span ref={ref} style={{display:'inline-flex',verticalAlign:'middle',alignItems:'center'}}/>;
};

const PBar=({current,total,color='linear-gradient(90deg,#6366f1,#818cf8)'})=>(
  <div className="prog"><div className="prog-fill" style={{width:`${Math.min(100,Math.max(0,(current/(total||1))*100))}%`,background:color}}/></div>
);

const Modal=({isOpen,onClose,title,children})=>{
  if(!isOpen)return null;
  return(
    <div className="overlay" onClick={e=>e.target===e.currentTarget&&onClose()}>
      <div className="modal anim">
        <div style={{padding:'24px 32px',borderBottom:'1px solid rgba(255,255,255,.07)',display:'flex',justifyContent:'space-between',alignItems:'center',borderRadius:'24px 24px 0 0',background:'rgba(255,255,255,.02)'}}>
          <h3 style={{fontSize:22,fontWeight:700,color:'#fff',fontFamily:'Outfit,sans-serif',display:'flex',alignItems:'center',gap:10}}>
            <span style={{padding:7,background:'rgba(99,102,241,.12)',borderRadius:9,display:'inline-flex'}}><Icon name="layers" size={16} className="text-indigo-400"/></span>{title}
          </h3>
          <button onClick={onClose} style={{padding:7,borderRadius:9,background:'rgba(255,255,255,.05)',border:'none',cursor:'pointer',color:'#94a3b8',display:'flex'}}><Icon name="x" size={19}/></button>
        </div>
        <div style={{padding:'26px 32px',overflowY:'auto',flex:1}}>{children}</div>
      </div>
    </div>
  );
};

// ─── AUTH GATE ───
const AuthGate=({onLogin})=>{
  const[username,setUsername]=useState('');
  const[loading,setLoading]=useState(false);
  const[error,setError]=useState('');
  const[typed,setTyped]=useState('');
  const msg='FRIDAY OS v24.0 — 60-Day Challenge Protocol...';
  useEffect(()=>{let i=0;const t=setInterval(()=>{setTyped(msg.slice(0,++i));if(i>=msg.length)clearInterval(t);},40);return()=>clearInterval(t);},[]);
  const submit=async(e)=>{
    e.preventDefault();
    const clean=username.trim().toLowerCase().replace(/[^a-z0-9_]/g,'');
    if(!clean||clean.length<3)return setError('Min 3 karakter. Huruf, angka, underscore.');
    setLoading(true);setError('');
    try{
      if(!window.firebaseModules)await new Promise(r=>window.addEventListener('firebaseReady',r,{once:true}));
      const db=getDB();const{doc,getDoc,setDoc}=window.firebaseModules;
      const ref=doc(db,'friday_users',clean);const snap=await getDoc(ref);
      if(!snap.exists())await setDoc(ref,{username:clean,createdAt:new Date().toISOString()});
      localStorage.setItem('friday_uid',clean);onLogin(clean);
    }catch(err){console.error(err);setError('Gagal konek Firestore. Cek koneksi & Firestore Rules (allow read,write:if true).');}
    finally{setLoading(false);}
  };
  return(
    <div style={{minHeight:'100vh',background:'#030712',display:'flex',alignItems:'center',justifyContent:'center',position:'relative',overflow:'hidden'}}>
      <div className="grid-bg"/>
      <div className="glow" style={{width:500,height:500,background:'rgba(99,102,241,.1)',top:-150,left:-150}}/>
      <div className="glow" style={{width:350,height:350,background:'rgba(139,92,246,.07)',bottom:-80,right:-80}}/>
      <div className="anim" style={{position:'relative',zIndex:10,width:'100%',maxWidth:420,padding:'0 20px'}}>
        <div className="mono" style={{color:'rgba(99,102,241,.6)',fontSize:14,marginBottom:12,letterSpacing:'.1em'}}>{typed}<span className="blink">▋</span></div>
        <div className="glass scanwrap" style={{padding:40}}>
          <div style={{textAlign:'center',marginBottom:28}}>
            <div className="pring" style={{display:'inline-flex',width:70,height:70,background:'linear-gradient(135deg,#6366f1,#818cf8)',borderRadius:20,alignItems:'center',justifyContent:'center',boxShadow:'0 0 40px rgba(99,102,241,.35)',marginBottom:14}}>
              <Icon name="cpu" size={28} className="text-white"/>
            </div>
            <h1 style={{fontSize:39,fontWeight:900,color:'#fff',letterSpacing:'-.02em',marginBottom:6}}>FRIDAY <span style={{color:'#818cf8'}}>OS</span></h1>
            <p className="mono" style={{fontSize:13,color:'#475569',letterSpacing:'.15em',textTransform:'uppercase'}}>60-Day Challenge · Cloud Sync · No Auth</p>
          </div>
          <form onSubmit={submit} style={{display:'flex',flexDirection:'column',gap:14}}>
            {error&&<div style={{background:'rgba(239,68,68,.08)',border:'1px solid rgba(239,68,68,.2)',borderRadius:10,padding:'11px 14px',color:'#f87171',fontSize:17,display:'flex',alignItems:'flex-start',gap:7}}><span style={{flexShrink:0,marginTop:1}}><Icon name="alert-circle" size={14}/></span>{error}</div>}
            <div>
              <label style={{fontSize:13,fontWeight:700,color:'#475569',letterSpacing:'.12em',textTransform:'uppercase',display:'block',marginBottom:7}}>ID Kamu</label>
              <div style={{position:'relative'}}>
                <span className="mono" style={{position:'absolute',left:16,top:'50%',transform:'translateY(-50%)',color:'#6366f1',fontSize:15,fontWeight:600,userSelect:'none',pointerEvents:'none'}}>&gt;_</span>
                <input type="text" value={username} onChange={e=>setUsername(e.target.value.replace(/[^a-zA-Z0-9_]/g,''))} className="inp mono" style={{paddingLeft:44,letterSpacing:'.04em'}} placeholder="nama_kamu" autoComplete="off" autoCapitalize="none" maxLength={30} required/>
              </div>
              <p style={{fontSize:14,color:'#1e293b',marginTop:5}}>Huruf kecil, angka, underscore · min 3 karakter</p>
            </div>
            <button type="submit" className="btn" disabled={loading||username.length<3}>
              {loading?<><span className="spin"><Icon name="loader-2" size={15}/></span>Menghubungkan...</>:<><Icon name="log-in" size={15}/>Masuk ke Sistem</>}
            </button>
          </form>
          <div style={{marginTop:22,paddingTop:16,borderTop:'1px solid rgba(255,255,255,.04)',textAlign:'center'}}>
            <p className="mono" style={{fontSize:12,color:'#1e293b',letterSpacing:'.1em',textTransform:'uppercase'}}>Data tersinkron cloud · Akses dari device manapun</p>
          </div>
        </div>
      </div>
    </div>
  );
};

// ─── DATA SYNC ───
const useSync=(key,def,uid)=>{
  const[val,setVal]=useState(()=>{try{const l=localStorage.getItem(`fos_${uid}_${key}`);return l?JSON.parse(l):def;}catch{return def;}});
  const ready=useRef(false);const timer=useRef(null);
  useEffect(()=>{if(!uid||!window.firebaseModules)return;const{doc,onSnapshot}=window.firebaseModules;const ref=doc(getDB(),'friday_users',uid,'data',key);const unsub=onSnapshot(ref,snap=>{if(snap.exists()){const v=snap.data().val;setVal(v);localStorage.setItem(`fos_${uid}_${key}`,JSON.stringify(v));}ready.current=true;},()=>{ready.current=true;});return()=>unsub();},[uid,key]);
  const save=useCallback((v)=>{localStorage.setItem(`fos_${uid}_${key}`,JSON.stringify(v));if(timer.current)clearTimeout(timer.current);timer.current=setTimeout(async()=>{if(!ready.current||!uid||!window.firebaseModules)return;try{const{doc,setDoc}=window.firebaseModules;await setDoc(doc(getDB(),'friday_users',uid,'data',key),{val:v},{merge:true});}catch(e){console.warn('Sync fail:',e);}},1000);},[uid,key]);
  const set=useCallback((updater)=>{setVal(prev=>{const next=typeof updater==='function'?updater(prev):updater;save(next);return next;});},[save]);
  return[val,set];
};

// ══════════════════════════════════════════
//  DATA KURIKULUM LENGKAP PER VIDEO
// ══════════════════════════════════════════
const ROADMAP_DATA = [
  {
    id:'js', title:'JavaScript Advanced', dur:'Week 1–3', 
    pl:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-',
    c:['#f59e0b','#f97316'], week:'1–3',
    desc:'Fondasi JS yang dalam: scope, closure, async, OOP, hingga design pattern.',
    videos:[
      {id:'js01',title:'#01 – Pengenalan JavaScript Advanced',url:'https://www.youtube.com/watch?v=RwT41El778A'},
      {id:'js02',title:'#02 – Execution Context & Call Stack',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=2'},
      {id:'js03',title:'#03 – Scope & Lexical Environment',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=3'},
      {id:'js04',title:'#04 – Hoisting',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=4'},
      {id:'js05',title:'#05 – Closure',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=5'},
      {id:'js06',title:'#06 – Immediately Invoked Function Expression (IIFE)',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=6'},
      {id:'js07',title:'#07 – Prototype & Prototype Chain',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=7'},
      {id:'js08',title:'#08 – Class & OOP',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=8'},
      {id:'js09',title:'#09 – Inheritance & Polymorphism',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=9'},
      {id:'js10',title:'#10 – Symbol & Iterator',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=10'},
      {id:'js11',title:'#11 – Generator',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=11'},
      {id:'js12',title:'#12 – Promise',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=12'},
      {id:'js13',title:'#13 – Async / Await',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=13'},
      {id:'js14',title:'#14 – Event Loop & Concurrency',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=14'},
      {id:'js15',title:'#15 – Fetch API & Axios',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=15'},
      {id:'js16',title:'#16 – Error Handling & Custom Error',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=16'},
      {id:'js17',title:'#17 – Module System (ESM)',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=17'},
      {id:'js18',title:'#18 – Proxy & Reflect',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=18'},
      {id:'js19',title:'#19 – WeakMap, WeakSet & WeakRef',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=19'},
      {id:'js20',title:'#20 – Design Pattern: Singleton & Observer',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=20'},
      {id:'js21',title:'#21 – Design Pattern: Factory & Strategy',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=21'},
      {id:'js22',title:'#22 – Functional Programming: Pure Function & Immutability',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=22'},
      {id:'js23',title:'#23 – Functional Programming: Higher-Order Function',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=23'},
      {id:'js24',title:'#24 – Currying & Composition',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=24'},
      {id:'js25',title:'#25 – Memoization & Performance Optimization',url:'https://www.youtube.com/watch?v=RwT41El778A&list=PLFIM0718LjIUGpY8wmE41W7rTJo_3Y46-&index=25'},
    ],
    casestudies:[
      {id:'jscs1',title:'Case Study 1 – Membuat Event Emitter dari scratch',desc:'Implementasikan Observer pattern: subscribe, emit, unsubscribe.'},
      {id:'jscs2',title:'Case Study 2 – Promise Chain & Async Waterfall',desc:'Buat pipeline async: fetch → transform → display dengan error handling.'},
      {id:'jscs3',title:'Case Study 3 – Mini State Manager (Redux-like)',desc:'Buat store sederhana dengan reducer, dispatch, dan subscribe.'},
      {id:'jscs4',title:'Case Study 4 – Lazy Loading Module',desc:'Implementasi dynamic import dan code splitting.'},
      {id:'jscs5',title:'Case Study 5 – Build Utility Library (Lodash-mini)',desc:'Buat library: debounce, throttle, deepClone, groupBy.'},
    ]
  },
  {
    id:'tw', title:'Tailwind CSS Mastery', dur:'Week 4–5',
    pl:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h',
    c:['#06b6d4','#3b82f6'], week:'4–5',
    desc:'Kuasai utility-first CSS untuk membangun UI modern dan responsif.',
    videos:[
      {id:'tw01',title:'#01 – Pengenalan Tailwind CSS',url:'https://www.youtube.com/watch?v=z3slaXqmkT0'},
      {id:'tw02',title:'#02 – Instalasi & Konfigurasi Tailwind',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=2'},
      {id:'tw03',title:'#03 – Typography & Text Utility',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=3'},
      {id:'tw04',title:'#04 – Color & Background',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=4'},
      {id:'tw05',title:'#05 – Spacing: Padding & Margin',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=5'},
      {id:'tw06',title:'#06 – Flexbox dengan Tailwind',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=6'},
      {id:'tw07',title:'#07 – Grid Layout dengan Tailwind',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=7'},
      {id:'tw08',title:'#08 – Responsive Design & Breakpoints',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=8'},
      {id:'tw09',title:'#09 – Hover, Focus & State Variant',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=9'},
      {id:'tw10',title:'#10 – Dark Mode',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=10'},
      {id:'tw11',title:'#11 – Animation & Transition',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=11'},
      {id:'tw12',title:'#12 – Custom Config & Extend Theme',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=12'},
      {id:'tw13',title:'#13 – Component: Button & Badge',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=13'},
      {id:'tw14',title:'#14 – Component: Card & Modal',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=14'},
      {id:'tw15',title:'#15 – Component: Navbar & Sidebar',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=15'},
      {id:'tw16',title:'#16 – Component: Form & Input',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=16'},
      {id:'tw17',title:'#17 – Tailwind Plugin & @apply',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=17'},
      {id:'tw18',title:'#18 – JIT Mode & Arbitrary Values',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=18'},
      {id:'tw19',title:'#19 – Optimasi Produksi: Purge CSS',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=19'},
      {id:'tw20',title:'#20 – Integrasi dengan Vite & PostCSS',url:'https://www.youtube.com/watch?v=z3slaXqmkT0&list=PLFIM0718LjIUHFRMzPJ0wGjx9_NlC5d1h&index=20'},
    ],
    casestudies:[
      {id:'twcs1',title:'Case Study 1 – Landing Page Produk',desc:'Build responsive product landing page with hero, features, pricing section.'},
      {id:'twcs2',title:'Case Study 2 – Admin Dashboard Layout',desc:'Sidebar, topbar, card grid, data table — full responsive.'},
      {id:'twcs3',title:'Case Study 3 – Dark Mode Portfolio',desc:'Personal portfolio dengan toggle dark/light mode.'},
      {id:'twcs4',title:'Case Study 4 – E-Commerce Product Page',desc:'Product grid, filter sidebar, cart badge, modal detail.'},
      {id:'twcs5',title:'Case Study 5 – Mobile App UI Clone',desc:'Clone salah satu mobile UI ke web menggunakan Tailwind.'},
    ]
  },
  {
    id:'rt', title:'React.js Ecosystem', dur:'Week 6–7',
    pl:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1',
    c:['#8b5cf6','#6366f1'], week:'6–7',
    desc:'Build dynamic SPA: hooks, context, routing, state management, dan API integration.',
    videos:[
      {id:'rt01',title:'#01 – Pengenalan React.js',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA'},
      {id:'rt02',title:'#02 – JSX & Component',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=2'},
      {id:'rt03',title:'#03 – Props & State',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=3'},
      {id:'rt04',title:'#04 – useState Hook',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=4'},
      {id:'rt05',title:'#05 – useEffect Hook',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=5'},
      {id:'rt06',title:'#06 – useRef & useMemo',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=6'},
      {id:'rt07',title:'#07 – useCallback & useReducer',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=7'},
      {id:'rt08',title:'#08 – Context API',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=8'},
      {id:'rt09',title:'#09 – Custom Hook',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=9'},
      {id:'rt10',title:'#10 – React Router v6',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=10'},
      {id:'rt11',title:'#11 – Nested Route & Protected Route',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=11'},
      {id:'rt12',title:'#12 – Fetch API & Axios di React',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=12'},
      {id:'rt13',title:'#13 – Error Boundary & Suspense',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=13'},
      {id:'rt14',title:'#14 – Form Handling & Validasi',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=14'},
      {id:'rt15',title:'#15 – Zustand / State Management',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=15'},
      {id:'rt16',title:'#16 – React Query (TanStack Query)',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=16'},
      {id:'rt17',title:'#17 – Performance Optimization',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=17'},
      {id:'rt18',title:'#18 – Testing di React (Vitest)',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=18'},
      {id:'rt19',title:'#19 – Build & Deploy ke Vercel',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=19'},
      {id:'rt20',title:'#20 – TypeScript + React Dasar',url:'https://www.youtube.com/watch?v=kcnwI_5nKyA&list=PLFIM0718LjIUu3X2zYNqomEWs3sYd-fV1&index=20'},
    ],
    casestudies:[
      {id:'rtcs1',title:'Case Study 1 – Todo App dengan Context + useReducer',desc:'Full CRUD, filter, persistent ke localStorage.'},
      {id:'rtcs2',title:'Case Study 2 – Movie Search App (API Integration)',desc:'Fetch dari public API, pagination, skeleton loading.'},
      {id:'rtcs3',title:'Case Study 3 – Auth Flow (Login/Register/Protected)',desc:'JWT simulation, protected routes, redirect logic.'},
      {id:'rtcs4',title:'Case Study 4 – E-Commerce Mini (Cart & Checkout)',desc:'Product list, cart state, quantity control, total.'},
      {id:'rtcs5',title:'Case Study 5 – Real-time Chat UI (Firebase)',desc:'Firestore listener, message display, send message.'},
    ]
  },
  {
    id:'nd', title:'Node.js Backend', dur:'Week 8',
    pl:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD',
    c:['#10b981','#059669'], week:'8',
    desc:'Build REST API: Express, Prisma/Mongoose, auth JWT, middleware, dan deploy.',
    videos:[
      {id:'nd01',title:'#01 – Pengenalan Node.js',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4'},
      {id:'nd02',title:'#02 – NPM & Package Management',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=2'},
      {id:'nd03',title:'#03 – Module System (CommonJS & ESM)',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=3'},
      {id:'nd04',title:'#04 – File System (fs module)',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=4'},
      {id:'nd05',title:'#05 – HTTP Server dengan http module',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=5'},
      {id:'nd06',title:'#06 – Express.js Dasar',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=6'},
      {id:'nd07',title:'#07 – Routing & Controller',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=7'},
      {id:'nd08',title:'#08 – Middleware',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=8'},
      {id:'nd09',title:'#09 – REST API Design',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=9'},
      {id:'nd10',title:'#10 – Koneksi Database (MongoDB/MySQL)',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=10'},
      {id:'nd11',title:'#11 – Mongoose / Prisma ORM',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=11'},
      {id:'nd12',title:'#12 – CRUD Operation dengan Database',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=12'},
      {id:'nd13',title:'#13 – Authentication: JWT',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=13'},
      {id:'nd14',title:'#14 – Authorization & Role-based Access',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=14'},
      {id:'nd15',title:'#15 – Validasi Input (Joi / Zod)',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=15'},
      {id:'nd16',title:'#16 – Upload File dengan Multer',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=16'},
      {id:'nd17',title:'#17 – Error Handling Middleware',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=17'},
      {id:'nd18',title:'#18 – Environment Variable & dotenv',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=18'},
      {id:'nd19',title:'#19 – Testing API dengan Jest / Supertest',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=19'},
      {id:'nd20',title:'#20 – Deploy ke Railway / Render',url:'https://www.youtube.com/watch?v=sSLJx5t4OJ4&list=PLFIM0718LjIW-XBdVOerYgKegBtD6rSfD&index=20'},
    ],
    casestudies:[
      {id:'ndcs1',title:'Case Study 1 – REST API: Blog (CRUD + Auth)',desc:'Endpoint: register, login, CRUD posts, JWT middleware.'},
      {id:'ndcs2',title:'Case Study 2 – User Management API',desc:'Role admin/user, pagination, search, sort endpoint.'},
      {id:'ndcs3',title:'Case Study 3 – File Upload Service',desc:'Upload gambar, resize, store ke cloud/local.'},
      {id:'ndcs4',title:'Case Study 4 – Real-time Notification (Socket.io)',desc:'WebSocket dasar, event emit, broadcast ke room.'},
      {id:'ndcs5',title:'Case Study 5 – Fullstack Integration (React + Node)',desc:'Connect React frontend ke Express API, full auth flow.'},
    ]
  }
];

// ══════════════════════════════════════════
//  WORKOUT PLAN (dari gambar yang diupload)
// ══════════════════════════════════════════
// Jadwal: Senin=Push, Selasa=Core, Rabu=Leg, Kamis=Core, Jumat=Pull, Sabtu=Core, Minggu=Rest
const WORKOUT = {
  'Senin': {
    type:'Push Day (Gym)', focus:'Dada, Bahu, Trisep', col:'#ef4444',
    exercises:[
      {name:'Incline Dumbbell Press', detail:'3 x 10-12', target:'Dada Atas'},
      {name:'Scaption (Y-Raise)', detail:'3 x 10-12', target:'Bahu Samping'},
      {name:'Seated Cable Row', detail:'3 x 10-12', target:'Punggung Tengah (Scapula)'},
      {name:'Pec Fly Machine', detail:'2 x 15', target:'Dada (Peregangan)'},
      {name:'One Arm DB Row', detail:'3 x 10 (per sisi)', target:'Punggung Sisi (Lats)'},
    ]
  },
  'Selasa': {
    type:'Core (Home)', focus:'Otot Inti & Stabilitas', col:'#10b981',
    exercises:[
      {name:'Dead Bug', detail:'3 x 10-12 (Total)', target:'Otot Perut Dalam (Deep Core)'},
      {name:'Bird Dog', detail:'3 x 10 (Total)', target:'Keseimbangan Kiri-Kanan'},
      {name:'Plank Siku', detail:'3 x 30-45 Detik', target:'Core Depan + Scapula'},
      {name:'Side Plank', detail:'3 x 20-30 Detik (Per Sisi)', target:'Pinggang Samping (Anti-Skoliosis)'},
      {name:'Glute Bridge', detail:'3 x 12-15 Reps', target:'Pantat (Glutes)'},
    ]
  },
  'Rabu': {
    type:'Leg Day (Gym)', focus:'Paha & Gluteus', col:'#8b5cf6',
    exercises:[
      {name:'Goblet Squat', detail:'3 x 10-12', target:'Paha & Postur'},
      {name:'Bulgarian Split Squat', detail:'3 x 8-10 (per kaki)', target:'Kaki (Unilateral)'},
      {name:'Leg Curl Machine', detail:'3 x 12', target:'Paha Belakang'},
      {name:'Seated Cable Row', detail:'3 x 10-12', target:'Punggung Tengah'},
      {name:'Hammer Curl', detail:'3 x 12', target:'Tangan (Bisep)'},
    ]
  },
  'Kamis': {
    type:'Core (Home)', focus:'Otot Inti & Stabilitas', col:'#10b981',
    exercises:[
      {name:'Dead Bug', detail:'3 x 10-12 (Total)', target:'Otot Perut Dalam (Deep Core)'},
      {name:'Bird Dog', detail:'3 x 10 (Total)', target:'Keseimbangan Kiri-Kanan'},
      {name:'Plank Siku', detail:'3 x 30-45 Detik', target:'Core Depan + Scapula'},
      {name:'Side Plank', detail:'3 x 20-30 Detik (Per Sisi)', target:'Pinggang Samping'},
      {name:'Glute Bridge', detail:'3 x 12-15 Reps', target:'Pantat (Glutes)'},
    ]
  },
  'Jumat': {
    type:'Pull Day (Gym)', focus:'Punggung & Bisep', col:'#6366f1',
    exercises:[
      {name:'Lat Pulldown', detail:'3 x 10-12', target:'Sayap (Lats)'},
      {name:'Seated Cable Row', detail:'3 x 10-12', target:'Punggung Tengah'},
      {name:'One Arm DB Row', detail:'3 x 10 (per sisi)', target:'Punggung Samping'},
      {name:'Machine Reverse Fly', detail:'3 x 12-15', target:'Bahu Belakang (Rear Delt)'},
      {name:'Hammer Curl', detail:'3 x 12', target:'Tangan (Bisep)'},
    ]
  },
  'Sabtu': {
    type:'Core (Home)', focus:'Otot Inti & Abs', col:'#f59e0b',
    exercises:[
      {name:'Dead Bug', detail:'3 x 10-12 (Total)', target:'Core Dalam'},
      {name:'Bird Dog', detail:'3 x 10 (Total)', target:'Stabilitas'},
      {name:'Plank Siku', detail:'3 x 40-60 Detik', target:'Core Depan'},
      {name:'Side Plank', detail:'3 x 30 Detik (Per Sisi)', target:'Obliques'},
      {name:'Glute Bridge', detail:'3 x 15 Reps', target:'Gluteus'},
    ]
  },
  'Minggu': {
    type:'Rest Day', focus:'Pemulihan & Persiapan', col:'#64748b',
    exercises:[
      {name:'Full Sleep', detail:'9 jam', target:'Pemulihan total'},
      {name:'Meal Prep', detail:'1–2 jam', target:'Persiapan makan sehat'},
      {name:'Stretching ringan', detail:'15–20 menit', target:'Fleksibilitas'},
      {name:'Review progress & planning', detail:'30 menit', target:'Mental reset'},
    ]
  }
};

// ══════════════════════════════════════════
//  DAILY MISSIONS GENERATOR (intensif 60 hari)
// ══════════════════════════════════════════
// Total video: JS=25, TW=20, RT=20, ND=20 = 85 video + 20 case studies = 105 items
// 60 hari → ~1.75 item/hari → target 2 video/hari
const generateDailyMissions = () => {
  const allVideos = [];
  ROADMAP_DATA.forEach(phase => {
    phase.videos.forEach(v => allVideos.push({...v, phase: phase.title, phaseId: phase.id, type:'video'}));
    phase.casestudies.forEach(cs => allVideos.push({...cs, phase: phase.title, phaseId: phase.id, type:'case'}));
  });
  // Distribusikan: 2 video + 0-1 case study per hari
  const missions = [];
  let vidIdx = 0; let csIdx = 0;
  for(let day = 0; day < 60; day++) {
    const dayMissions = [];
    // 2 video per hari
    for(let i=0;i<2;i++){
      if(vidIdx < allVideos.filter(v=>v.type==='video').length){
        const vids = allVideos.filter(v=>v.type==='video');
        dayMissions.push(vids[vidIdx++]);
      }
    }
    // case study setiap 5 hari
    if(day%5===4){
      const cases = allVideos.filter(v=>v.type==='case');
      if(csIdx < cases.length) dayMissions.push(cases[csIdx++]);
    }
    missions.push(dayMissions);
  }
  return missions;
};

const DAILY_MISSIONS = generateDailyMissions();

// ─── MAIN APP ───
const App=()=>{
  const[uid,setUid]=useState(()=>localStorage.getItem('friday_uid')||null);
  const logout=()=>{localStorage.removeItem('friday_uid');setUid(null);};
  const[tab,setTab]=useState('daily');
  const[mob,setMob]=useState(window.innerWidth<768);
  const[collapsed,setCollapsed]=useState(false);

  // Modals
  const[bookLog,setBookLog]=useState(false);
  const[bookEdit,setBookEdit]=useState(null);
  const[roadModal,setRoadModal]=useState(null);
  const[calModal,setCalModal]=useState(false);
  const[nutModal,setNutModal]=useState(false);

  // Data
  const[weight,setWeight]=useSync('weight',{start:76,current:76,target:65},uid);
  const[cals,setCals]=useSync('calories',[],uid);
  const[exDone,setExDone]=useSync('exercises',{},uid);
  const[rprog,setRprog]=useSync('roadmap',{},uid);
  const[library,setLibrary]=useSync('library',[
    {id:1,title:'Atomic Habits',author:'James Clear',totalPages:320,currentPage:0,coverUrl:'https://m.media-amazon.com/images/I/81wgcld4wxL.jpg'},
    {id:2,title:'Clean Code',author:'Robert C. Martin',totalPages:464,currentPage:0,coverUrl:'https://m.media-amazon.com/images/I/41-sN-mzwKL.jpg'}
  ],uid);
  const[cfg]=useSync('config',{startDate:'2026-02-19T00:00:00.000Z'},uid);

  const today=new Date();
  const start=new Date('2026-02-19T00:00:00.000Z');
  const end=new Date(start);end.setDate(start.getDate()+60);
  const dayN=Math.max(0,Math.floor((today-start)/86400000));
  const pct=Math.round((dayN/60)*100);
  const days=['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
  const dayName=days[today.getDay()];
  const dateKey=today.toISOString().split('T')[0];
  const fmtDate=today.toLocaleDateString('id-ID',{day:'numeric',month:'long',year:'numeric'});

  // Workout
  const ws=WORKOUT[dayName];
  const exKey=(ex)=>`${dateKey}-${dayName}-${ex.name}`;
  const isExDone=(ex)=>!!exDone[exKey(ex)];
  const toggleEx=(ex)=>setExDone(p=>({...p,[exKey(ex)]:!p[exKey(ex)]}));
  const fitProg=()=>{const es=ws?.exercises||[];return{done:es.filter(e=>isExDone(e)).length,total:es.length};};

  // Today missions
  const todayMissions = dayN < DAILY_MISSIONS.length ? DAILY_MISSIONS[dayN] : [];
  const todayCal=cals.filter(c=>c.date===dateKey).reduce((s,c)=>s+c.amount,0);

  // Total roadmap progress
  const allVideoIds = ROADMAP_DATA.flatMap(p=>[...p.videos.map(v=>v.id),...p.casestudies.map(cs=>cs.id)]);
  const totalDone = allVideoIds.filter(id=>rprog[id]).length;

  useEffect(()=>{const h=()=>setMob(window.innerWidth<768);window.addEventListener('resize',h);return()=>window.removeEventListener('resize',h);},[]);
  if(!uid)return <AuthGate onLogin={setUid}/>;

  const fp=fitProg();
  const tabs=[
    {id:'daily',icon:'zap',label:'Daily'},
    {id:'fitness',icon:'activity',label:'Fitness'},
    {id:'roadmap',icon:'map',label:'Roadmap'},
    {id:'library',icon:'book-open',label:'Library'},
    {id:'dashboard',icon:'layout-grid',label:'Overview'},
  ];

  const R=({children,style={}})=><div style={{display:'flex',alignItems:'center',...style}}>{children}</div>;
  const C=({children,style={}})=><div style={{display:'flex',flexDirection:'column',...style}}>{children}</div>;

  return(
    <div style={{display:'flex',height:'100vh',background:'#030712',overflow:'hidden',position:'relative'}}>
      <div className="grid-bg"/>
      <div className="glow" style={{width:700,height:700,background:'rgba(99,102,241,.07)',top:-250,left:-200}}/>

      {/* SIDEBAR */}
      {!mob&&(
        <div className="sidebar" style={{width:collapsed?90:310}}>
          <div style={{padding:collapsed?'20px 0':'22px 20px',borderBottom:'1px solid rgba(255,255,255,.05)',display:'flex',alignItems:'center',gap:11,justifyContent:collapsed?'center':'flex-start'}}>
            <div style={{width:44,height:44,background:'linear-gradient(135deg,#6366f1,#818cf8)',borderRadius:11,display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0,boxShadow:'0 4px 16px rgba(99,102,241,.3)'}}>
              <Icon name="cpu" size={19} className="text-white"/>
            </div>
            {!collapsed&&<div><div style={{fontSize:22,fontWeight:900,color:'#fff',fontFamily:'Outfit'}}>FRIDAY <span style={{color:'#818cf8'}}>OS</span></div><div className="mono" style={{fontSize:12,color:'#1e293b'}}>v24.0 · 60-Day</div></div>}
          </div>
          {!collapsed&&(
            <div style={{margin:'14px',padding:'13px 16px',background:'rgba(99,102,241,.07)',borderRadius:14,border:'1px solid rgba(99,102,241,.15)',display:'flex',alignItems:'center',gap:9}}>
              <div style={{width:36,height:36,background:'linear-gradient(135deg,#6366f1,#8b5cf6)',borderRadius:8,display:'flex',alignItems:'center',justifyContent:'center',fontWeight:800,fontSize:15,color:'#fff',flexShrink:0}}>{uid.charAt(0).toUpperCase()}</div>
              <div style={{flex:1,minWidth:0}}>
                <div className="mono" style={{fontSize:15,color:'#c7d2fe',fontWeight:600,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{uid}</div>
                <div style={{fontSize:13,color:'#334155'}}>Day {dayN} of 60 · {pct}%</div>
              </div>
              <div className="sync" style={{width:5,height:5,borderRadius:'50%',background:'#10b981',flexShrink:0}}/>
            </div>
          )}
          {!collapsed&&(
            <div style={{margin:'0 14px 10px',padding:'10px 13px',background:'rgba(16,185,129,.06)',borderRadius:10,border:'1px solid rgba(16,185,129,.15)'}}>
              <div style={{fontSize:13,color:'#34d399',fontWeight:700,marginBottom:4,letterSpacing:'.06em'}}>ROADMAP PROGRESS</div>
              <PBar current={totalDone} total={allVideoIds.length} color="linear-gradient(90deg,#10b981,#059669)"/>
              <div style={{fontSize:13,color:'#334155',marginTop:4}}>{totalDone}/{allVideoIds.length} items selesai</div>
            </div>
          )}
          <div style={{flex:1,padding:'6px 10px',display:'flex',flexDirection:'column',gap:2}}>
            {tabs.map(t=>(
              <button key={t.id} onClick={()=>setTab(t.id)} className={`tab ${tab===t.id?'on':''}`} style={{justifyContent:collapsed?'center':'flex-start',padding:collapsed?'12px 0':'12px 16px'}}>
                <Icon name={t.icon} size={22}/>{!collapsed&&<span>{t.label}</span>}
              </button>
            ))}
          </div>
          <div style={{padding:'10px',borderTop:'1px solid rgba(255,255,255,.04)'}}>
            <button onClick={()=>setCollapsed(p=>!p)} className="tab" style={{justifyContent:collapsed?'center':'flex-start',marginBottom:4,padding:collapsed?'11px 0':'11px 16px'}}>
              <Icon name={collapsed?'chevrons-right':'chevrons-left'} size={20}/>{!collapsed&&<span style={{fontSize:17}}>Collapse</span>}
            </button>
            <button onClick={logout} className="tab" style={{color:'#f87171',justifyContent:collapsed?'center':'flex-start',padding:collapsed?'11px 0':'11px 16px'}}>
              <Icon name="log-out" size={20}/>{!collapsed&&<span>Logout</span>}
            </button>
          </div>
        </div>
      )}

      {/* MAIN */}
      <main style={{flex:1,overflowY:'auto',position:'relative',zIndex:10,paddingBottom:mob?88:0}}>
        {/* Header */}
        <div style={{position:'sticky',top:0,zIndex:30,background:'rgba(3,7,18,.92)',backdropFilter:'blur(24px)',borderBottom:'1px solid rgba(255,255,255,.05)',padding:'20px 28px',display:'flex',justifyContent:'space-between',alignItems:'center',gap:12,flexWrap:'wrap'}}>
          <div>
            <R style={{gap:13,marginBottom:4}}>
              <div style={{width:42,height:42,borderRadius:13,background:'linear-gradient(135deg,#6366f1,#818cf8)',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 0 20px rgba(99,102,241,.45), 0 4px 12px rgba(0,0,0,.4)',flexShrink:0}}>
                <span style={{fontFamily:'Outfit,sans-serif',fontWeight:900,fontSize:24,color:'#fff',lineHeight:1,letterSpacing:'-0.03em'}}>D</span>
              </div>
              <span style={{fontSize:22,fontWeight:700,color:'#fff'}}>Command Center</span>
              <span className="mono" style={{fontSize:13,color:'#6366f1',background:'rgba(99,102,241,.1)',border:'1px solid rgba(99,102,241,.2)',borderRadius:5,padding:'2px 7px'}}>{uid}</span>
            </R>
            <div style={{fontSize:15,color:'#475569',display:'flex',gap:9}}>
              <span>{fmtDate}</span><span style={{color:'#334155'}}>·</span>
              <span style={{color:'#818cf8',fontWeight:600}}>Day {dayN}/60</span>
              <span style={{color:'#334155'}}>·</span>
              <span style={{color:'#10b981',fontWeight:600}}>{weight.current}kg → {weight.target}kg</span>
            </div>
          </div>
          <R style={{gap:7}}>
            {[
              {fn:()=>setCalModal(true),label:'PROGRESS',val:`${pct}%`,col:'#818cf8',icon:'calendar'},
              {fn:()=>setNutModal(true),label:'BERAT',val:`${weight.current}kg`,col:'#34d399',icon:'scale'}
            ].map(h=>(
              <button key={h.label} onClick={h.fn} className="glass glass-btn" style={{padding:'11px 16px',display:'flex',alignItems:'center',gap:12}}>
                <div><div style={{fontSize:13,color:h.col,fontWeight:700,letterSpacing:'.05em'}}>{h.label}</div><div style={{fontSize:24,fontWeight:800,color:'#fff'}}>{h.val}</div></div>
                <Icon name={h.icon} size={18} style={{color:h.col}}/>
              </button>
            ))}
            {mob&&<button onClick={logout} style={{padding:'9px 11px',background:'rgba(239,68,68,.08)',border:'1px solid rgba(239,68,68,.15)',borderRadius:12,color:'#f87171',cursor:'pointer',display:'flex',alignItems:'center'}}><Icon name="log-out" size={17}/></button>}
          </R>
        </div>

        <div style={{padding:'26px 22px',maxWidth:1100,margin:'0 auto'}}>

          {/* ═══ DAILY ═══ */}
          {tab==='daily'&&(
            <div className="anim" style={{display:'flex',flexDirection:'column',gap:13}}>
              
              {/* TOP ROW */}
              <div style={{display:'grid',gridTemplateColumns:mob?'1fr':'1fr 1.7fr',gap:16}}>
                {/* Fitness */}
                <div className="glass" style={{padding:30,display:'flex',flexDirection:'column',gap:18}}>
                  <R style={{justifyContent:'space-between'}}>
                    <div style={{padding:10,background:`${ws?.col}18`,borderRadius:12}}><Icon name="dumbbell" size={22} style={{color:ws?.col}}/></div>
                    <span style={{fontSize:13,fontWeight:700,color:ws?.col,background:`${ws?.col}12`,border:`1px solid ${ws?.col}30`,borderRadius:7,padding:'2px 8px'}}>{ws?.type}</span>
                  </R>
                  <div>
                    <h3 style={{fontSize:24,fontWeight:700,color:'#fff',marginBottom:2}}>Fitness Hari Ini</h3>
                    <p style={{fontSize:15,color:'#64748b'}}>{ws?.focus}</p>
                  </div>
                  <div>
                    <R style={{justifyContent:'space-between',fontSize:15,color:'#64748b',marginBottom:6}}>
                      <span>Gerakan</span><span style={{color:'#fff',fontWeight:700}}>{fp.done}/{fp.total}</span>
                    </R>
                    <PBar current={fp.done} total={fp.total} color={`linear-gradient(90deg,${ws?.col},${ws?.col}88)`}/>
                  </div>
                  <button onClick={()=>setTab('fitness')} className="btn" style={{background:`linear-gradient(135deg,${ws?.col},${ws?.col}cc)`,marginTop:2,fontSize:14}}>
                    <Icon name="play" size={13}/> Mulai Workout
                  </button>
                </div>

                {/* Today Coding Missions */}
                <div className="glass" style={{padding:30,display:'flex',flexDirection:'column',gap:16}}>
                  <R style={{gap:10,justifyContent:'space-between'}}>
                    <R style={{gap:10}}>
                      <div style={{padding:9,background:'rgba(99,102,241,.1)',borderRadius:11}}><Icon name="code-2" size={18} className="text-indigo-400"/></div>
                      <div><h3 style={{fontSize:19,fontWeight:700,color:'#fff'}}>Coding Missions Hari Ini</h3><p style={{fontSize:15,color:'#475569'}}>Day {dayN+1} — {todayMissions.length} item harus selesai</p></div>
                    </R>
                    <span className="mono" style={{fontSize:13,color:'#475569',background:'rgba(255,255,255,.04)',border:'1px solid rgba(255,255,255,.07)',borderRadius:6,padding:'3px 8px',whiteSpace:'nowrap'}}>{totalDone}/{allVideoIds.length}</span>
                  </R>
                  {todayMissions.length===0&&<div style={{textAlign:'center',padding:'20px 0',color:'#334155',fontSize:15}}>🎉 Semua selesai!</div>}
                  <C style={{gap:8}}>
                    {todayMissions.map((m,i)=>{
                      const done=rprog[m.id];
                      return(
                        <div key={m.id} style={{background:done?'rgba(16,185,129,.04)':'rgba(3,7,18,.6)',border:`1px solid ${done?'rgba(16,185,129,.2)':'rgba(255,255,255,.06)'}`,borderRadius:12,padding:13,display:'flex',gap:12,alignItems:'flex-start'}}>
                          <div style={{width:28,height:28,borderRadius:9,border:`2px solid ${done?'#10b981':'rgba(255,255,255,.15)'}`,background:done?'#10b981':'transparent',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0,marginTop:1,cursor:'pointer',transition:'all .2s'}} onClick={()=>setRprog(p=>({...p,[m.id]:!p[m.id]}))}>
                            {done&&<Icon name="check" size={11} className="text-white"/>}
                          </div>
                          <div style={{flex:1}}>
                            <div style={{display:'flex',gap:6,marginBottom:3,flexWrap:'wrap'}}>
                              <span className="tag" style={{background:m.type==='video'?'rgba(99,102,241,.15)':'rgba(245,158,11,.15)',color:m.type==='video'?'#818cf8':'#fbbf24',border:`1px solid ${m.type==='video'?'rgba(99,102,241,.25)':'rgba(245,158,11,.25)'}`}}>{m.type==='video'?'▶ Video':'🔬 Case Study'}</span>
                              <span className="tag" style={{background:'rgba(255,255,255,.03)',color:'#475569',border:'1px solid rgba(255,255,255,.06)'}}>{m.phase}</span>
                            </div>
                            <p style={{fontSize:18,fontWeight:600,color:done?'#475569':'#e2e8f0',textDecoration:done?'line-through':'none',lineHeight:1.4}}>{m.title}</p>
                            {m.desc&&<p style={{fontSize:15,color:'#334155',marginTop:3}}>{m.desc}</p>}
                            {m.url&&<a href={m.url} target="_blank" rel="noopener" style={{fontSize:15,color:'#6366f1',marginTop:3,display:'inline-flex',alignItems:'center',gap:4,textDecoration:'none'}}>
                              <Icon name="external-link" size={10}/> Buka Video
                            </a>}
                          </div>
                        </div>
                      );
                    })}
                  </C>
                </div>
              </div>

              {/* Reading */}
              <div className="glass" style={{padding:28,display:'flex',alignItems:'center',gap:15,flexWrap:'wrap'}}>
                <div style={{padding:16,background:'rgba(245,158,11,.1)',borderRadius:15}}><Icon name="book-open" size={25} className="text-amber-400"/></div>
                <div style={{flex:1,minWidth:150}}>
                  <h3 style={{fontSize:22,fontWeight:700,color:'#fff',marginBottom:2}}>Daily Reading</h3>
                  <p style={{fontSize:15,color:'#64748b'}}>Target: <span style={{color:'#fbbf24',fontWeight:700}}>+15 halaman</span> setiap hari</p>
                </div>
                <button onClick={()=>setBookLog(true)} style={{padding:'10px 18px',background:'linear-gradient(135deg,#d97706,#f59e0b)',border:'none',borderRadius:12,color:'#fff',fontWeight:700,cursor:'pointer',display:'flex',alignItems:'center',gap:7,fontSize:14,boxShadow:'0 4px 16px rgba(245,158,11,.2)',fontFamily:'Space Grotesk,sans-serif'}}>
                  <Icon name="plus" size={14}/> Log Reading
                </button>
              </div>
            </div>
          )}

          {/* ═══ FITNESS ═══ */}
          {tab==='fitness'&&(
            <div className="anim" style={{maxWidth:680,margin:'0 auto'}}>
              <div className="glass" style={{padding:28,marginBottom:18,display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:15}}>
                <div>
                  <h2 style={{fontSize:28,fontWeight:800,color:'#fff',marginBottom:6}}>{dayName} — {ws?.type}</h2>
                  <R style={{gap:7,flexWrap:'wrap'}}>
                    <span style={{padding:'4px 11px',background:`${ws?.col}18`,border:`1px solid ${ws?.col}40`,borderRadius:8,fontSize:13,fontWeight:700,color:ws?.col}}>{ws?.type}</span>
                    <span style={{padding:'4px 11px',background:'rgba(255,255,255,.03)',border:'1px solid rgba(255,255,255,.07)',borderRadius:8,fontSize:15,color:'#64748b'}}>{ws?.focus}</span>
                  </R>
                </div>
                <div style={{textAlign:'center',background:'rgba(3,7,18,.5)',border:'1px solid rgba(255,255,255,.07)',borderRadius:16,padding:'16px 24px'}}>
                  <div style={{fontSize:41,fontWeight:800,color:'#fff',lineHeight:1}}>{fp.done}<span style={{fontSize:21,color:'#334155'}}>/{fp.total}</span></div>
                  <div style={{fontSize:13,color:'#475569',marginTop:2}}>SELESAI</div>
                </div>
              </div>
              <PBar current={fp.done} total={fp.total} color={`linear-gradient(90deg,${ws?.col},${ws?.col}88)`}/>
              
              {/* Exercise list with target info */}
              <C style={{gap:10,marginTop:18}}>
                {ws?.exercises.map((ex,i)=>{
                  const done=isExDone(ex);
                  return(
                    <div key={i} className={`ex-card ${done?'done':''}`} onClick={()=>toggleEx(ex)}>
                      <div style={{width:50,height:50,borderRadius:14,border:`2px solid ${done?'#10b981':'rgba(255,255,255,.1)'}`,background:done?'rgba(16,185,129,.12)':'rgba(255,255,255,.02)',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0,transition:'all .2s'}}>
                        {done?<Icon name="check" size={19} className="text-emerald-400"/>:<span style={{fontSize:17,fontWeight:700,color:'#475569'}}>{i+1}</span>}
                      </div>
                      <div style={{flex:1}}>
                        <div style={{fontSize:18,fontWeight:700,color:done?'#64748b':'#e2e8f0',textDecoration:done?'line-through':'none'}}>{ex.name}</div>
                        <div style={{fontSize:15,color:'#475569',marginTop:1}}>{ex.detail} · <span style={{color:'#6366f1'}}>{ex.target}</span></div>
                      </div>
                      {done&&<Icon name="zap" size={13} className="text-emerald-500"/>}
                    </div>
                  );
                })}
              </C>
            </div>
          )}

          {/* ═══ ROADMAP ═══ */}
          {tab==='roadmap'&&(
            <div className="anim">
              <R style={{gap:11,marginBottom:18}}>
                <div style={{padding:10,background:'rgba(99,102,241,.1)',borderRadius:12}}><Icon name="map" size={20} className="text-indigo-400"/></div>
                <div>
                  <h2 style={{fontSize:24,fontWeight:800,color:'#fff'}}>Fullstack Curriculum — 60 Hari Intensif</h2>
                  <p style={{fontSize:17,color:'#475569'}}>4 fase · {allVideoIds.length} items total · target selesai dalam 2 bulan</p>
                </div>
              </R>
              <div style={{display:'grid',gridTemplateColumns:mob?'1fr':'repeat(2,1fr)',gap:15}}>
                {ROADMAP_DATA.map((p,idx)=>{
                  const allItems=[...p.videos.map(v=>v.id),...p.casestudies.map(cs=>cs.id)];
                  const done=allItems.filter(id=>rprog[id]).length;
                  const pp=Math.round((done/(allItems.length||1))*100);
                  return(
                    <div key={p.id} className="pcard" onClick={()=>setRoadModal(p)}>
                      <R style={{justifyContent:'space-between',marginBottom:12}}>
                        <R style={{gap:10}}>
                          <div style={{width:50,height:50,borderRadius:14,background:`linear-gradient(135deg,${p.c[0]},${p.c[1]})`,display:'flex',alignItems:'center',justifyContent:'center',fontWeight:800,color:'#fff',fontSize:21,boxShadow:`0 4px 16px ${p.c[0]}40`}}>{idx+1}</div>
                          <div>
                            <h3 style={{fontSize:19,fontWeight:700,color:'#fff'}}>{p.title}</h3>
                            <span style={{fontSize:13,color:'#475569',fontWeight:600,letterSpacing:'.06em',textTransform:'uppercase'}}>Week {p.week} · {p.videos.length} video · {p.casestudies.length} case study</span>
                          </div>
                        </R>
                        <span style={{fontSize:28,fontWeight:800,color:'rgba(255,255,255,.12)'}}>{pp}%</span>
                      </R>
                      <PBar current={done} total={allItems.length} color={`linear-gradient(90deg,${p.c[0]},${p.c[1]})`}/>
                      <R style={{justifyContent:'space-between',marginTop:8}}>
                        <div style={{fontSize:14,color:'#334155'}}>{done}/{allItems.length} selesai</div>
                        <div style={{fontSize:15,color:'#475569'}}>{p.desc.slice(0,40)}...</div>
                      </R>
                    </div>
                  );
                })}
              </div>
            </div>
          )}

          {/* ═══ LIBRARY ═══ */}
          {tab==='library'&&(
            <div className="anim">
              <R style={{justifyContent:'space-between',marginBottom:18}}>
                <h2 style={{fontSize:24,fontWeight:800,color:'#fff'}}>Your Library</h2>
                <button onClick={()=>setBookEdit({id:null,title:'',author:'',totalPages:0,currentPage:0,coverUrl:''})} className="btn" style={{width:'auto',padding:'8px 16px',fontSize:15}}>
                  <Icon name="plus" size={13}/> Add Book
                </button>
              </R>
              <div style={{display:'grid',gridTemplateColumns:mob?'1fr':'repeat(3,1fr)',gap:15}}>
                {library.map(b=>(
                  <div key={b.id} className="glass glass-btn" style={{padding:16}} onClick={()=>setBookEdit(b)}>
                    <R style={{gap:12,marginBottom:12}}>
                      <div style={{width:54,height:74,background:'#1e293b',borderRadius:9,overflow:'hidden',flexShrink:0,boxShadow:'0 8px 20px rgba(0,0,0,.4)'}}>
                        <img src={b.coverUrl} style={{width:'100%',height:'100%',objectFit:'cover'}} alt={b.title} onError={e=>{e.target.style.display='none'}}/>
                      </div>
                      <div style={{flex:1,minWidth:0}}>
                        <h3 style={{fontSize:18,fontWeight:700,color:'#fff',marginBottom:2,lineHeight:1.3}}>{b.title}</h3>
                        <p style={{fontSize:15,color:'#475569'}}>{b.author}</p>
                      </div>
                    </R>
                    <div style={{fontSize:13,fontWeight:700,color:'#6366f1',marginBottom:5,letterSpacing:'.06em',textTransform:'uppercase'}}>
                      {Math.round((b.currentPage/(b.totalPages||1))*100)}% Complete
                    </div>
                    <PBar current={b.currentPage} total={b.totalPages}/>
                    <div style={{fontSize:13,color:'#334155',marginTop:5}}>Hal {b.currentPage}/{b.totalPages}</div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* ═══ DASHBOARD ═══ */}
          {tab==='dashboard'&&(
            <div className="anim">
              <h2 style={{fontSize:24,fontWeight:800,color:'#fff',marginBottom:16}}>Overview</h2>
              <div style={{display:'grid',gridTemplateColumns:'repeat(2,1fr)',gap:14,marginBottom:16}}>
                {[
                  {icon:'activity',col:'#ef4444',label:'FITNESS',val:`${fp.done}/${fp.total}`},
                  {icon:'calendar',col:'#6366f1',label:'HARI',val:`${dayN}/60`},
                  {icon:'scale',col:'#10b981',label:'BERAT',val:`${weight.current}kg`,sub:`→ ${weight.target}kg`},
                  {icon:'code-2',col:'#818cf8',label:'CODING',val:`${totalDone}/${allVideoIds.length}`,sub:`${Math.round((totalDone/allVideoIds.length)*100)}% roadmap`},
                ].map(s=>(
                  <div key={s.label} style={{background:'rgba(15,23,42,.6)',border:'1px solid rgba(255,255,255,.06)',borderRadius:18,padding:24,display:'flex',flexDirection:'column',alignItems:'center',textAlign:'center'}}>
                    <div style={{padding:11,background:`${s.col}18`,borderRadius:'50%',marginBottom:10}}><Icon name={s.icon} size={26} style={{color:s.col}}/></div>
                    <div style={{fontSize:13,fontWeight:700,color:'#475569',letterSpacing:'.08em',marginBottom:4}}>{s.label}</div>
                    <div style={{fontSize:32,fontWeight:800,color:'#fff'}}>{s.val}</div>
                    {s.sub&&<div style={{fontSize:13,color:'#334155',marginTop:2}}>{s.sub}</div>}
                  </div>
                ))}
              </div>
              {/* Weight progress */}
              <div className="glass" style={{padding:18,marginBottom:11}}>
                <R style={{justifyContent:'space-between',marginBottom:10}}>
                  <div><h3 style={{fontSize:18,fontWeight:700,color:'#fff',marginBottom:1}}>Body Weight Journey</h3><p style={{fontSize:15,color:'#475569'}}>{weight.start}kg → {weight.target}kg dalam 60 hari</p></div>
                  <div style={{fontSize:15,color:'#10b981',fontWeight:700}}>-{(weight.start-weight.current).toFixed(1)}kg sejauh ini</div>
                </R>
                <PBar current={weight.start-weight.current} total={weight.start-weight.target} color="linear-gradient(90deg,#10b981,#059669)"/>
                <div style={{fontSize:13,color:'#334155',marginTop:5}}>{(weight.start-weight.current).toFixed(1)} / {weight.start-weight.target} kg telah turun</div>
              </div>
              {todayCal>0&&(
                <div className="glass" style={{padding:16,marginBottom:11}}>
                  <R style={{justifyContent:'space-between',marginBottom:8}}>
                    <span style={{fontSize:17,fontWeight:700,color:'#fff'}}>Kalori Hari Ini</span>
                    <span style={{fontSize:20,fontWeight:800,color:'#fb923c'}}>{todayCal} <span style={{fontSize:17,color:'#475569'}}>kcal</span></span>
                  </R>
                  <PBar current={todayCal} total={1800} color="linear-gradient(90deg,#f97316,#ef4444)"/>
                  <div style={{fontSize:13,color:'#334155',marginTop:4}}>Target kalori defisit: maks 1800 kcal/hari</div>
                </div>
              )}
              <div className="glass" style={{padding:18}}>
                <R style={{justifyContent:'space-between',marginBottom:11}}>
                  <div><h3 style={{fontSize:18,fontWeight:700,color:'#fff',marginBottom:1}}>60-Day Challenge</h3><p style={{fontSize:15,color:'#475569'}}>Selesai: {end.toLocaleDateString('id-ID',{day:'numeric',month:'long',year:'numeric'})}</p></div>
                  <div style={{fontSize:39,fontWeight:900,color:'#6366f1'}}>{pct}%</div>
                </R>
                <PBar current={dayN} total={60}/>
              </div>
            </div>
          )}
        </div>
      </main>

      {mob&&(
        <nav className="mobnav">
          {tabs.map(t=>(
            <button key={t.id} className={`mobbtn ${tab===t.id?'on':''}`} onClick={()=>setTab(t.id)}>
              <Icon name={t.icon} size={19} className={tab===t.id?'text-indigo-400':''}/><span>{t.label}</span>
            </button>
          ))}
        </nav>
      )}

      {/* MODALS */}

      {/* Log Reading */}
      <Modal isOpen={bookLog} onClose={()=>setBookLog(false)} title="Log Reading Session">
        <C style={{gap:8}}>
          {library.map(b=>(
            <button key={b.id} onClick={()=>{setLibrary(p=>p.map(bk=>bk.id===b.id?{...bk,currentPage:Math.min(bk.totalPages,bk.currentPage+15)}:bk));setBookLog(false);}} style={{display:'flex',alignItems:'center',gap:12,padding:13,background:'rgba(15,23,42,.6)',border:'1px solid rgba(255,255,255,.07)',borderRadius:13,cursor:'pointer',textAlign:'left',width:'100%',fontFamily:'Space Grotesk,sans-serif',transition:'all .2s'}}>
              <div style={{width:40,height:54,background:'#1e293b',borderRadius:7,overflow:'hidden',flexShrink:0}}>
                <img src={b.coverUrl} style={{width:'100%',height:'100%',objectFit:'cover'}} alt={b.title}/>
              </div>
              <div style={{flex:1}}>
                <div style={{fontSize:18,fontWeight:700,color:'#fff',marginBottom:2}}>{b.title}</div>
                <div style={{fontSize:12,color:'#475569',marginBottom:5}}>{b.currentPage}/{b.totalPages} hal</div>
                <PBar current={b.currentPage} total={b.totalPages}/>
              </div>
              <div style={{padding:6,background:'rgba(245,158,11,.1)',borderRadius:8}}><Icon name="plus" size={14} className="text-amber-400"/></div>
            </button>
          ))}
        </C>
      </Modal>

      {/* Edit Book */}
      <Modal isOpen={!!bookEdit} onClose={()=>setBookEdit(null)} title={bookEdit?.id?'Edit Buku':'Tambah Buku'}>
        {bookEdit&&(
          <form onSubmit={e=>{e.preventDefault();const fd=new FormData(e.target);const nb={id:bookEdit.id||Date.now(),title:fd.get('title'),author:fd.get('author'),totalPages:parseInt(fd.get('tp')),currentPage:parseInt(fd.get('cp')),coverUrl:fd.get('cover')};setLibrary(p=>bookEdit.id?p.map(b=>b.id===nb.id?nb:b):[...p,nb]);setBookEdit(null);}} style={{display:'flex',flexDirection:'column',gap:15}}>
            {[['title','Judul','text',bookEdit.title,true],['author','Penulis','text',bookEdit.author,true],['cover','Cover URL (opsional)','url',bookEdit.coverUrl,false]].map(([n,l,t,d,r])=>(
              <div key={n}><label style={{fontSize:11,fontWeight:700,color:'#475569',letterSpacing:'.08em',display:'block',marginBottom:6,textTransform:'uppercase'}}>{l}</label><input name={n} type={t} defaultValue={d} className="inp" required={r}/></div>
            ))}
            <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:9}}>
              {[['tp','Total Hal',bookEdit.totalPages],['cp','Hal Sekarang',bookEdit.currentPage]].map(([n,l,d])=>(
                <div key={n}><label style={{fontSize:11,fontWeight:700,color:'#475569',letterSpacing:'.08em',display:'block',marginBottom:6,textTransform:'uppercase'}}>{l}</label><input name={n} type="number" min="0" defaultValue={d} className="inp" required/></div>
              ))}
            </div>
            <R style={{gap:9,marginTop:2}}>
              {bookEdit.id&&<button type="button" onClick={()=>{setLibrary(p=>p.filter(b=>b.id!==bookEdit.id));setBookEdit(null);}} style={{flex:1,padding:'10px',borderRadius:10,background:'rgba(239,68,68,.08)',border:'1px solid rgba(239,68,68,.2)',color:'#f87171',fontWeight:700,cursor:'pointer',fontSize:15,fontFamily:'Space Grotesk,sans-serif'}}>Hapus</button>}
              <button type="submit" className="btn" style={{flex:2}}>Simpan</button>
            </R>
          </form>
        )}
      </Modal>

      {/* Biometrics */}
      <Modal isOpen={nutModal} onClose={()=>setNutModal(false)} title="Biometrics & Nutrisi">
        <C style={{gap:15}}>
          <div style={{background:'rgba(16,185,129,.05)',border:'1px solid rgba(16,185,129,.15)',borderRadius:14,padding:17}}>
            <div style={{fontSize:13,fontWeight:700,color:'#34d399',marginBottom:2,letterSpacing:'.08em',textTransform:'uppercase'}}>Berat Badan</div>
            <R style={{alignItems:'baseline',gap:8,marginBottom:12}}>
              <span style={{fontSize:41,fontWeight:800,color:'#fff'}}>{weight.current}</span>
              <span style={{fontSize:17,color:'#475569'}}>kg · target {weight.target} kg · sisa {(weight.current-weight.target).toFixed(1)} kg</span>
            </R>
            <PBar current={weight.start-weight.current} total={weight.start-weight.target} color="linear-gradient(90deg,#10b981,#059669)"/>
            <div style={{fontSize:13,color:'#334155',marginTop:5}}>Progress: {((weight.start-weight.current)/(weight.start-weight.target)*100).toFixed(0)}% menuju target</div>
            <form onSubmit={e=>{e.preventDefault();setWeight(p=>({...p,current:parseFloat(e.target.w.value)}));setNutModal(false);}} style={{display:'flex',gap:8,marginTop:12}}>
              <input name="w" type="number" step="0.1" placeholder={weight.current} className="inp" style={{flex:1}} required/>
              <button style={{padding:'10px 14px',background:'linear-gradient(135deg,#10b981,#059669)',border:'none',borderRadius:10,color:'#fff',fontWeight:700,cursor:'pointer',fontSize:17,fontFamily:'Space Grotesk,sans-serif'}}>Update</button>
            </form>
          </div>
          <div style={{background:'rgba(249,115,22,.05)',border:'1px solid rgba(249,115,22,.15)',borderRadius:14,padding:17}}>
            <R style={{justifyContent:'space-between',marginBottom:8}}>
              <div style={{fontSize:13,fontWeight:700,color:'#fb923c',letterSpacing:'.08em',textTransform:'uppercase'}}>Kalori Hari Ini</div>
              <span style={{fontSize:20,fontWeight:800,color:'#f97316'}}>{todayCal} kcal</span>
            </R>
            <PBar current={todayCal} total={1800} color="linear-gradient(90deg,#f97316,#ef4444)"/>
            <div style={{fontSize:13,color:'#334155',marginTop:4}}>Target defisit kalori: maks 1800 kcal/hari</div>
            <form onSubmit={e=>{e.preventDefault();setCals(p=>[...p,{date:dateKey,amount:parseInt(e.target.c.value)}]);e.target.reset();}} style={{display:'flex',gap:8,marginTop:11}}>
              <input name="c" type="number" placeholder="Tambah kalori (kcal)" className="inp" style={{flex:1}} required/>
              <button style={{padding:'10px 14px',background:'linear-gradient(135deg,#f97316,#ef4444)',border:'none',borderRadius:10,color:'#fff',fontWeight:700,cursor:'pointer',fontSize:17,fontFamily:'Space Grotesk,sans-serif'}}>+</button>
            </form>
            {cals.filter(c=>c.date===dateKey).length>0&&(
              <div style={{marginTop:8,display:'flex',gap:5,flexWrap:'wrap'}}>
                {cals.filter(c=>c.date===dateKey).map((c,i)=>(
                  <span key={i} className="mono" style={{padding:'2px 8px',background:'rgba(249,115,22,.1)',border:'1px solid rgba(249,115,22,.2)',borderRadius:6,fontSize:14,color:'#fb923c'}}>{c.amount} kcal</span>
                ))}
              </div>
            )}
          </div>
        </C>
      </Modal>

      {/* Roadmap Phase Detail — per video + case study */}
      <Modal isOpen={!!roadModal} onClose={()=>setRoadModal(null)} title={roadModal?.title||''}>
        {roadModal&&(
          <C style={{gap:15}}>
            <a href={roadModal.pl} target="_blank" rel="noopener noreferrer" style={{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'15px 18px',background:`linear-gradient(135deg,${roadModal.c[0]},${roadModal.c[1]})`,borderRadius:14,textDecoration:'none',color:'#fff',boxShadow:`0 8px 24px ${roadModal.c[0]}40`}}>
              <div><div style={{fontSize:20,fontWeight:800,marginBottom:2}}>▶ Buka Playlist YouTube</div><div style={{fontSize:13,opacity:.75}}>{roadModal.videos.length} video · {roadModal.casestudies.length} case study</div></div>
              <div style={{padding:10,background:'rgba(0,0,0,.2)',borderRadius:'50%'}}><Icon name="play" size={18}/></div>
            </a>
            <p style={{fontSize:15,color:'#64748b'}}>{roadModal.desc}</p>

            {/* Videos */}
            <div>
              <div style={{fontSize:14,fontWeight:700,color:'#475569',letterSpacing:'.1em',textTransform:'uppercase',marginBottom:8}}>
                📹 VIDEO ({roadModal.videos.filter(v=>rprog[v.id]).length}/{roadModal.videos.length} selesai)
              </div>
              <C style={{gap:5,maxHeight:300,overflowY:'auto'}}>
                {roadModal.videos.map(v=>{
                  const done=rprog[v.id];
                  return(
                    <div key={v.id} className={`vcard ${done?'done':''}`}>
                      <div onClick={()=>setRprog(p=>({...p,[v.id]:!p[v.id]}))} style={{width:18,height:18,borderRadius:5,border:`2px solid ${done?'#10b981':'rgba(255,255,255,.14)'}`,background:done?'#10b981':'transparent',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0,cursor:'pointer',transition:'all .2s'}}>
                        {done&&<Icon name="check" size={10} className="text-white"/>}
                      </div>
                      <div style={{flex:1}}>
                        <p style={{fontSize:15,fontWeight:600,color:done?'#475569':'#e2e8f0',textDecoration:done?'line-through':'none'}}>{v.title}</p>
                      </div>
                      <a href={v.url} target="_blank" rel="noopener" style={{padding:'4px 8px',background:'rgba(99,102,241,.1)',border:'1px solid rgba(99,102,241,.2)',borderRadius:6,color:'#818cf8',fontSize:13,fontWeight:700,textDecoration:'none',display:'flex',alignItems:'center',gap:4,flexShrink:0}}>
                        <Icon name="external-link" size={10}/>Tonton
                      </a>
                    </div>
                  );
                })}
              </C>
            </div>

            {/* Case Studies */}
            <div>
              <div style={{fontSize:14,fontWeight:700,color:'#f59e0b',letterSpacing:'.1em',textTransform:'uppercase',marginBottom:8}}>
                🔬 CASE STUDIES ({roadModal.casestudies.filter(cs=>rprog[cs.id]).length}/{roadModal.casestudies.length} selesai)
              </div>
              <C style={{gap:7}}>
                {roadModal.casestudies.map(cs=>{
                  const done=rprog[cs.id];
                  return(
                    <div key={cs.id} onClick={()=>setRprog(p=>({...p,[cs.id]:!p[cs.id]}))} style={{display:'flex',gap:11,alignItems:'flex-start',padding:'12px 14px',background:done?'rgba(245,158,11,.04)':'rgba(15,23,42,.5)',border:`1px solid ${done?'rgba(245,158,11,.2)':'rgba(255,255,255,.05)'}`,borderRadius:11,cursor:'pointer',transition:'all .2s'}}>
                      <div style={{width:18,height:18,borderRadius:5,border:`2px solid ${done?'#f59e0b':'rgba(255,255,255,.14)'}`,background:done?'#f59e0b':'transparent',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0,marginTop:1,transition:'all .2s'}}>
                        {done&&<Icon name="check" size={10} className="text-white"/>}
                      </div>
                      <div>
                        <p style={{fontSize:15,fontWeight:700,color:done?'#64748b':'#fbbf24',textDecoration:done?'line-through':'none',marginBottom:2}}>{cs.title}</p>
                        <p style={{fontSize:15,color:'#475569'}}>{cs.desc}</p>
                      </div>
                    </div>
                  );
                })}
              </C>
            </div>
          </C>
        )}
      </Modal>

      {/* Timeline */}
      <Modal isOpen={calModal} onClose={()=>setCalModal(false)} title="Timeline — 60 Days">
        <div style={{display:'grid',gridTemplateColumns:'repeat(10,1fr)',gap:4,marginBottom:16}}>
          {Array.from({length:60}).map((_,i)=>{
            const past=i+1<dayN,cur=i+1===dayN;
            return<div key={i} style={{aspectRatio:'1',borderRadius:6,display:'flex',alignItems:'center',justifyContent:'center',fontSize:10,fontWeight:700,background:cur?'#6366f1':past?'rgba(99,102,241,.13)':'rgba(255,255,255,.02)',color:cur?'#fff':past?'#818cf8':'#1e293b',border:cur?'2px solid #818cf8':'1px solid rgba(255,255,255,.04)',boxShadow:cur?'0 0 12px rgba(99,102,241,.5)':'none'}}>{i+1}</div>;
          })}
        </div>
        <div style={{textAlign:'center',padding:15,background:'rgba(99,102,241,.05)',borderRadius:12,border:'1px solid rgba(99,102,241,.15)'}}>
          <div style={{fontSize:24,fontWeight:800,color:'#fff',marginBottom:2}}>{end.toLocaleDateString('id-ID',{day:'numeric',month:'long',year:'numeric'})}</div>
          <div style={{fontSize:18,color:'#6366f1',fontWeight:600}}>🎯 Target: 65 kg · Fullstack Developer</div>
        </div>
      </Modal>
    </div>
  );
};

const root=ReactDOM.createRoot(document.getElementById('root'));
root.render(<App/>);
</script>
</body>
</html>